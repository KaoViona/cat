<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cat Face ID API 測試</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  input, button { margin: 5px 0; }
  #result { margin-top: 20px; white-space: pre-wrap; }
</style>
</head>
<body>

<h2>Cat Face ID API 測試</h2>

<label>選擇圖片：
  <input type="file" id="fileInput" accept="image/*">
</label>
<br>
<button id="btnSend">上傳辨識</button>

<div id="status">狀態：等待操作</div>
<div id="result"></div>

<script>
const API_URL = 'http://127.0.0.1:8000/predict'; // 或你的局域網 IP

const fileInput = document.getElementById('fileInput');
const btnSend = document.getElementById('btnSend');
const statusEl = document.getElementById('status');
const resultEl = document.getElementById('result');

btnSend.addEventListener('click', async () => {
  const file = fileInput.files[0];
  if (!file) {
    alert('請先選擇圖片');
    return;
  }

  statusEl.textContent = '狀態：上傳中…';
  resultEl.textContent = '';

  try {
    const formData = new FormData();
    formData.append('file', file);

    const res = await fetch(API_URL, {
      method: 'POST',
      body: formData
    });

    if (!res.ok) throw new Error(`HTTP ${res.status}`);

    const data = await res.json();
    statusEl.textContent = '狀態：辨識完成';
    resultEl.textContent = JSON.stringify(data, null, 2);

  } catch (err) {
    console.error(err);
    statusEl.textContent = '狀態：辨識失敗';
    resultEl.textContent = err.message;
  }
});
</script>

</body>
</html>
